
<!DOCTYPE html>
<html>
<head>
	
	<title>Prototype history map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
	<link rel="stylesheet" type="text/css" href="styles/styles.css" />	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
<body>
<div id ='title'>
	<h1>Title goes here</h1>
</div>
<div id='map'></div>
<div id="footer">
	<p>footer goes here.</p>
</div>

<script src="data/sample.js"></script>

<script>

	var map = L.map('map').fitWorld();
    
    //add base layer
	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/light-v9',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(map);

    //define icon for marker
	var audioIcon = L.icon({
		iconUrl: 'static/images/speaker.svg',
		iconSize: [32, 32],
		iconAnchor: [0 ,0],
		popupAnchor: [0, 0]
	});

	//check for geolocation
	function onLocationFound(e) {
		var radius = e.accuracy / 2;

		L.marker(e.latlng).addTo(map)
	}

	function onLocationError(e) {
		var map = L.map('map').setView([50.3755, -4.1427], 13);;
	}

	map.on('locationfound', onLocationFound);
	map.on('locationerror', onLocationError);

	map.locate({setView: true, watch: true, maxZoom: 14});



    //add popup content for each feature
	function onEachFeature(feature, layer) {
        var popupContent = "<h1>" + feature.properties.title + "</h3>"
        

		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
        }
        
        if (feature.properties && feature.properties.audio) {
            popupContent += "<hr><audio controls src='" + feature.properties.audio + "'>Your browser does not support the<code>audio</code> element.</audio>"
		}
		
		if (feature.properties && feature.properties.image) {
			popupContent += "<hr><img class='popupImg' src='" + feature.properties.image + "' alt='" + feature.properties.altText + "'>"
		}

		layer.bindPopup(popupContent);
	}

	var audioFile = L.geoJSON(audioFile, {

		pointToLayer: function (feature, latlng) {
			return L.marker(latlng, {icon: audioIcon});
		},

		onEachFeature: onEachFeature
	}).addTo(map);

</script>



</body>
</html>
